$ifi not %DUMB%==yes $goto DUMB_END
$ifi not %DEGCYCLE%==yes $goto DEGCYCLE_END2

+ (SUM((S,T,IR)$(EV_BEV_Max(Y,S,T,IR) > 0),((EV_BEV_Dumb(Y,S,T,IR)/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0
+ (SUM((S,T,IR)$(EV_PHEV_Max(Y,S,T,IR) > 0),((EV_PHEV_Dumb(Y,S,T,IR)/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0

$label  DEGCYCLE_END2


$ifi not %DEGCAL%==yes $goto DEGCAL_END2
+ (SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(EV_BEV_SOCDumb(Y,S,T,IR)/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_BEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019)+0
+ (SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(EV_PHEV_SOCDumb(Y,S,T,IR)/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_PHEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019)+0


$label  DEGCAL_END2
$label  DUMB_END




$ifi not %SMART%==yes $goto SMART_END
$ifi not %DEGCYCLE%==yes $goto DEGCYCLE_END

+ (SUM((S,T,IR)$(EV_BEV_Max(Y,S,T,IR) > 0),(((VEV_VG2V_BEV(Y,IR,S,T)+EV_BEV_Inflex(Y,S,T,IR))/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0
+ (SUM((S,T,IR)$(EV_PHEV_Max(Y,S,T,IR) > 0),(((VEV_VG2V_PHEV(Y,IR,S,T)+EV_PHEV_Inflex(Y,S,T,IR))/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0

$label  DEGCYCLE_END

$ifi not %DEGCAL%==yes $goto DEGCAL_END

+ (SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(VEV_VSOC_BEV(Y,IR,S,T)/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_BEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019)+0
+ (SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(VEV_VSOC_BEV(Y,IR,S,T)/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_PHEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019)+0

$label  DEGCAL_END
$label  SMART_END




$ifi not %V2G%==yes $goto V2G_END
$ifi not %DEGCYCLE%==yes $goto V2GDEGCYCLE_END

+( SUM((S,T,IR)$(EV_BEV_Max(Y,S,T,IR) > 0),(((VEV_VG2V_BEV(Y,IR,S,T)+EV_BEV_Inflex(Y,S,T,IR))/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0
+( SUM((S,T,IR)$(EV_PHEV_Max(Y,S,T,IR) > 0),(((VEV_VG2V_PHEV(Y,IR,S,T)+EV_PHEV_Inflex(Y,S,T,IR))/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0


$label  V2GDEGCYCLE_END

$ifi not %DEGCAL%==yes $goto V2GDEGCAL_END

+( SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(VEV_VSOC_BEV(Y,IR,S,T)/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_BEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019)+0
+( SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(VEV_VSOC_BEV(Y,IR,S,T)/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_PHEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019)+0


$label  V2GDEGCAL_END
+( SUM((S,T,IR)$(ORD(S) EQ 1 AND ORD(T) EQ 1),EV_CHARGERCOST(Y) * EV_BEV_Avail(Y,S,T,IR)) )$(Y.val>2019)+0
*+ SUM((S,T,IR)$(ORD(S) EQ 1 AND ORD(T) EQ 1),EV_CHARGERCOST(Y) * EV_PHEV_Avail(Y,S,T,IR))

$label  V2G_END


$ifi not %STEPCHARGSCHEME%==yes $goto STEPCHARGSCHEME_END
$ifi not %DEGCYCLE%==yes $goto DEGCYCLE_END3

+ ((SUM((S,T,IR)$(EV_BEV_Max(Y,S,T,IR) > 0),((EV_BEV_Dumb(Y,S,T,IR)/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y))))
+ SUM((S,T,IR)$(EV_PHEV_Max(Y,S,T,IR) > 0),((EV_PHEV_Dumb(Y,S,T,IR)/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019))$cs('dumb',Y)

+ ((SUM((S,T,IR)$(EV_BEV_Max(Y,S,T,IR) > 0),(((VEV_VG2V_BEV(Y,IR,S,T)+EV_BEV_Inflex(Y,S,T,IR))/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0
+ (SUM((S,T,IR)$(EV_PHEV_Max(Y,S,T,IR) > 0),(((VEV_VG2V_PHEV(Y,IR,S,T)+EV_PHEV_Inflex(Y,S,T,IR))/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0)$cs('smart',Y)

+ ((SUM((S,T,IR)$(EV_BEV_Max(Y,S,T,IR) > 0),(((VEV_VG2V_BEV(Y,IR,S,T)+EV_BEV_Inflex(Y,S,T,IR))/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y))))
+ SUM((S,T,IR)$(EV_PHEV_Max(Y,S,T,IR) > 0),(((VEV_VG2V_PHEV(Y,IR,S,T)+EV_PHEV_Inflex(Y,S,T,IR))/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*EV_BATTDEGCYCLE(Y)*EV_BATTCOST(Y)*(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y)/(EV_LIFEFACTOR(Y)))))$(Y.val>2019))$cs('v2g',Y)



$label  DEGCYCLE_END3


$ifi not %DEGCAL%==yes $goto DEGCAL_END3
+ ((SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(EV_BEV_SOCDumb(Y,S,T,IR)/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_BEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y)))
+ SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(EV_PHEV_SOCDumb(Y,S,T,IR)/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_PHEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019))$cs('dumb',Y)

+ ((SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(VEV_VSOC_BEV(Y,IR,S,T)/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_BEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019)+0
+ (SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(VEV_VSOC_BEV(Y,IR,S,T)/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_PHEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019)+0)$cs('smart',Y)

+ ((SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(VEV_VSOC_BEV(Y,IR,S,T)/(EV_BEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_BEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y)))
+ SUM((S,T,IR),(EV_BATTDEGCALCONST(Y)+EV_BATTDEGCALFLEX(Y)*(VEV_VSOC_BEV(Y,IR,S,T)/(EV_PHEV_Max(Y,S,T,IR)*EV_BATTOVERSIZED(Y))))*(EV_PHEV_Max(Y,S,T,IR))*(EV_BATTCOST(Y)*EV_BATTOVERSIZED(Y)/EV_LIFEFACTOR(Y))))$(Y.val>2019))$cs('v2g',Y)



$label  DEGCAL_END3

+ ((SUM((S,T,IR)$(ORD(S) EQ 1 AND ORD(T) EQ 1),EV_CHARGERCOST(Y) * EV_BEV_Avail(Y,S,T,IR)))$(Y.val>2019))$cs('v2g',Y)

$label  STEPCHARGSCHEME_END


$ifi not %MIXEDFLEET%==yes $goto MIXEDFLEET_END
$ifi not %DEGCYCLE%==yes $goto DEGCYCLE_ENDMF
*Fleet1
+ ((SUM((S,T,IR)$((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) > 0),(((EV_BEV_Dumb_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y)*((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y))))
+ SUM((S,T,IR)$((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) > 0),(((EV_PHEV_Dumb_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * ((EV_PHEV_Max(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y)))))$(Y.val>2019))$cs1('dumb',Y)

+ ((SUM((S,T,IR)$((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) > 0),(((VEV_VG2V_BEV_1(Y,IR,S,T) + (EV_BEV_Inflex_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1'))) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * ((EV_BEV_Max(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0
+ (SUM((S,T,IR)$((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) > 0),(((VEV_VG2V_PHEV_1(Y,IR,S,T) + (EV_PHEV_Inflex_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1'))) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * (EV_PHEV_Max(Y,S,T,IR) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0)$cs1('smart',Y)

+ ((SUM((S,T,IR)$((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) > 0),(((VEV_VG2V_BEV_1(Y,IR,S,T) + (EV_BEV_Inflex_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1'))) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * ((EV_BEV_Max(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y))))
+ SUM((S,T,IR)$((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) > 0),(((VEV_VG2V_PHEV_1(Y,IR,S,T) + (EV_PHEV_Inflex_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1'))) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * (EV_PHEV_Max(Y,S,T,IR) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y)))))$(Y.val>2019))$cs1('v2g',Y)

*Fleet2
+ ((SUM((S,T,IR)$((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) > 0),(((EV_BEV_Dumb_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y)*((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y))))
+ SUM((S,T,IR)$((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) > 0),(((EV_PHEV_Dumb_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * ((EV_PHEV_Max(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y)))))$(Y.val>2019))$cs2('dumb',Y)

+ ((SUM((S,T,IR)$((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) > 0),(((VEV_VG2V_BEV_2(Y,IR,S,T) + (EV_BEV_Inflex_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2'))) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * ((EV_BEV_Max(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0
+ (SUM((S,T,IR)$((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) > 0),(((VEV_VG2V_PHEV_2(Y,IR,S,T) + (EV_PHEV_Inflex_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2'))) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * (EV_PHEV_Max(Y,S,T,IR) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y)))))$(Y.val>2019)+0)$cs2('smart',Y)

+ ((SUM((S,T,IR)$((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) > 0),(((VEV_VG2V_BEV_2(Y,IR,S,T) + (EV_BEV_Inflex_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2'))) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * ((EV_BEV_Max(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y))))
+ SUM((S,T,IR)$((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) > 0),(((VEV_VG2V_PHEV_2(Y,IR,S,T) + (EV_PHEV_Inflex_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2'))) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * EV_BATTDEGCYCLE(Y) * EV_BATTCOST(Y) * (EV_PHEV_Max(Y,S,T,IR) * EV_BATTOVERSIZED(Y) / (EV_LIFEFACTOR(Y)))))$(Y.val>2019))$cs2('v2g',Y)

$label  DEGCYCLE_ENDMF


$ifi not %DEGCAL%==yes $goto DEGCAL_ENDMF
*Fleet1
+ ((SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * ((EV_BEV_SOCDumb_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * ((EV_BEV_Max_n(Y,S,T,IR)* * EV_FLEETSIZE(IY411,'BEV_Fleet1'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y)))
+ SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * ((EV_PHEV_SOCDumb_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * ((EV_PHEV_Max_n(Y,S,T,IR)) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y))))$(Y.val>2019))$cs1('dumb',Y)

+ ((SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * (VEV_VSOC_BEV_1(Y,IR,S,T) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y))))$(Y.val>2019)+0
+ (SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * (VEV_VSOC_BEV_1(Y,IR,S,T) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y))))$(Y.val>2019)+0)$cs1('smart',Y)

+ ((SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * (VEV_VSOC_BEV_1(Y,IR,S,T) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet1'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y)))
+ SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * (VEV_VSOC_BEV_1(Y,IR,S,T) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1')) * EV_BATTOVERSIZED(Y)))) * ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet1'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y))))$(Y.val>2019))$cs1('v2g',Y)

*Fleet2
+ ((SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * ((EV_BEV_SOCDumb_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * ((EV_BEV_Max_n(Y,S,T,IR)* * EV_FLEETSIZE(IY411,'BEV_Fleet2'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y)))
+ SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * ((EV_PHEV_SOCDumb_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * ((EV_PHEV_Max_n(Y,S,T,IR)) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y))))$(Y.val>2019))$cs2('dumb',Y)

+ ((SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * (VEV_VSOC_BEV_2(Y,IR,S,T) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y))))$(Y.val>2019)+0
+ (SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * (VEV_VSOC_BEV_2(Y,IR,S,T) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y))))$(Y.val>2019)+0)$cs2('smart',Y)

+ ((SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * (VEV_VSOC_BEV_2(Y,IR,S,T) / ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * ((EV_BEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'BEV_Fleet2'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y)))
+ SUM((S,T,IR),(EV_BATTDEGCALCONST(Y) + EV_BATTDEGCALFLEX(Y) * (VEV_VSOC_BEV_2(Y,IR,S,T) / ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2')) * EV_BATTOVERSIZED(Y)))) * ((EV_PHEV_Max_n(Y,S,T,IR) * EV_FLEETSIZE(IY411,'PHEV_Fleet2'))) * (EV_BATTCOST(Y) * EV_BATTOVERSIZED(Y) / EV_LIFEFACTOR(Y))))$(Y.val>2019))$cs2('v2g',Y)

$label  DEGCAL_ENDMF

*Fleet1
+ ((SUM((S,T,IR)$(ORD(S) EQ 1 AND ORD(T) EQ 1),EV_CHARGERCOST(Y) * (EV_BEV_Avail_n(Y,S,T,IR) * EV_FLEETSIZE(Y,'BEV_Fleet1'))))$(Y.val>2019))$cs1('v2g',Y)

*Fleet2
+ ((SUM((S,T,IR)$(ORD(S) EQ 1 AND ORD(T) EQ 1),EV_CHARGERCOST(Y) * (EV_BEV_Avail_n(Y,S,T,IR) * EV_FLEETSIZE(Y,'BEV_Fleet2'))))$(Y.val>2019))$cs2('v2g',Y)

$label  MIXEDFLEET_END
